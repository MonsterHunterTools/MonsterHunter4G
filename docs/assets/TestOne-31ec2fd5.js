import{d as S,o as C,a as _,b,c as E,e as g,u as v,F as x}from"./index-196c7813.js";const A=""+new URL("Eshen Chen - Sea Side Road-b9d4282a.mp3",import.meta.url).href,B=g("div",{id:"audioinit"},null,-1),R=g("div",{id:"canvasinit"},null,-1),L=S({__name:"TestOne",setup(F){let w,n,d,i,a,s,u,t,l,e,m;return C(()=>{let f=document.getElementById("audioinit");function c(o){f.innerHTML='<audio id="audioplay"></audio>',n=document.getElementById("audioplay"),m=document.getElementById("canvasinit"),n.addEventListener("ended",function(){try{i.disconnect(),cancelAnimationFrame(u),n.remove(),n=null,m.removeChild(e)}catch{}},!1),n.src=o,d||(d=new AudioContext),i&&i.mediaElement!==n&&i.disconnect(),i=d.createMediaElementSource(n),a||(a=d.createAnalyser(),a.fftSize=8192),l=a.frequencyBinCount,i.connect(a),a.connect(d.destination),s=new Uint8Array(l),e=document.createElement("canvas"),e.style.position="absolute",e.style.top="0",e.style.left="0",e.width=window.innerWidth,e.height=window.innerHeight,m.appendChild(e),t=e.getContext("2d"),t.clearRect(0,0,e.width,e.height),n.play(),h()}const h=function(){a.getByteFrequencyData(s),t.fillStyle="rgb(0, 0, 0)",t.fillRect(0,0,e.width,e.height);const o=e.width/l*2.5;let r=0;for(let y=0;y<l;y++){const p=s[y];t.fillStyle="rgb("+Math.floor(p+100)+", 50, 50)",t.fillRect(r,100,o,p),t.font="16px Georgia",t.fillStyle="red",t.fillText(p,r,30,40),r+=o+1}u=window.requestAnimationFrame(h)};w=function(o){c(o)}}),_(()=>{try{cancelAnimationFrame(u),i.disconnect()}catch{}}),(f,c)=>(b(),E(x,null,[B,R,g("button",{onClick:c[0]||(c[0]=h=>v(w)(v(A)))},"SeaSideRoad")],64))}});export{L as default};
